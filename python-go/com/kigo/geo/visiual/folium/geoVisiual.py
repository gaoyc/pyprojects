# encoding=utf-8
"""
# 可视化
"""
from folium import plugins
import folium
import os
# import webbrowser


#创建以高德地图为底图的密度图：
def map_osm_gaode():
    map_osm = folium.Map(
        location=[113.409909,23.12668],
        zoom_start=5,
        tiles='http://webrd02.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}',
        attr='''&copy; <a href="http://ditu.amap.com/">高德地图</a>'''
        )
    return map_osm

m = folium.Map([113.409909,23.12668], zoom_start=5)  #中心区域的确定


# m = map_osm_gaode()


location =[[113.394791,23.112595],[113.397293,23.112980],[113.400520,23.113087],[113.397293,23.112980],[113.397621,23.113020],[113.397621,23.113020],[113.394791,23.112595],[113.397621,23.113020],[113.397621,23.113020],[113.397621,23.113020],[113.397621,23.113020],[113.397621,23.113020],[113.398781,23.111410],[113.387672,23.116659],[113.388046,23.116476],[113.388046,23.116476],[113.396599,23.121960],[113.386162,23.126760],[113.386681,23.127089],[113.386681,23.127089],[113.387650,23.126886],[113.388496,23.125681],[113.386681,23.127089],[113.386681,23.127089],[113.386681,23.127089],[113.387650,23.126886],[113.388496,23.125681],[113.387650,23.126886],[113.386429,23.126062],[113.384750,23.118040],[113.370987,23.121611],[113.308167,23.122370],[113.315430,23.122902],[113.314163,23.122669],[113.320320,23.124016],[113.319023,23.123171],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320015,23.127550],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320015,23.127550],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.320541,23.127470],[113.321144,23.127563],[113.321144,23.127563],[113.316750,23.124130],[113.308167,23.122370],[113.325813,23.121149],[113.357780,23.117840],[113.384750,23.118040],[113.389992,23.126650],[113.389992,23.126650],[113.389992,23.126650],[113.388496,23.125681],[113.388496,23.125681],[113.387650,23.126886],[113.387650,23.126886],[113.386429,23.126062],[113.387650,23.126886],[113.387650,23.126886],[113.387650,23.126886],[113.387650,23.126886],[113.386162,23.126760],[113.388496,23.125681],[113.396393,23.124277],[113.388496,23.125681],[113.396393,23.124277],[113.388496,23.125681],[113.396393,23.124277],[113.396011,23.123360],[113.396057,23.121870],[113.397583,23.120672],[113.399933,23.122484],[113.396057,23.121870],[113.399933,23.122484],[113.396301,23.121592],[113.396057,23.121870],[113.399483,23.122061],[113.396248,23.120750],[113.399025,23.121042],[113.399483,23.122061],[113.399483,23.122061],[113.399025,23.121042],[113.399025,23.121042],[113.399025,23.121042],[113.398163,23.117607],[113.398247,23.117519],[113.395699,23.116650],[113.395699,23.116650],[113.398163,23.117607],[113.395699,23.116650],[113.399483,23.122061],[113.396980,23.118641],[113.395737,23.116650],[113.399025,23.121042],[113.395737,23.116650],[113.395737,23.116650],[113.399673,23.122625],[113.396248,23.120750],[113.396057,23.121870],[113.396248,23.120750],[113.396248,23.120750],[113.399483,23.122061],[113.399483,23.122061],[113.395699,23.116650],[113.395737,23.116650],[113.396248,23.120750],[113.399025,23.121042],[113.395370,23.120205],[113.397125,23.121229],[113.396057,23.121870],[113.396057,23.121870],[113.398354,23.123091],[113.397583,23.120672],[113.397659,23.122252],[113.398697,23.124277],[113.398933,23.124718],[113.396011,23.123360],[113.396057,23.121870],[113.396011,23.123360],[113.399597,23.121744],[113.397514,23.122068],[113.396057,23.121870],[113.396057,23.121870],[113.396248,23.120750],[113.396202,23.119465],[113.399483,23.122061],[113.396202,23.119465],[113.396202,23.119465],[113.396202,23.119465],[113.399483,23.122061],[113.399025,23.121042],[113.399025,23.121042],[113.399483,23.122061],[113.399483,23.122061],[113.399025,23.121042],[113.399025,23.121042],[113.399025,23.121042],[113.397888,23.123341],[113.397217,23.127380],[113.390678,23.127253],[113.389503,23.128510],[113.388496,23.125681],[113.387650,23.126886],[113.387650,23.126886],[113.387650,23.126886],[113.387650,23.126886],[113.386665,23.127708],[113.387650,23.126886],[113.387650,23.126886],[113.386681,23.127089],[113.387527,23.117630],[113.388046,23.116476],[113.400520,23.113087],[113.387672,23.116659],[113.397621,23.113020],[113.394791,23.112595],[113.394791,23.112595],[113.394791,23.112595],[113.397293,23.112980],[113.388779,23.101858],[113.397621,23.113020],[113.397621,23.113020],[113.394791,23.112595],[113.388779,23.101858],[113.397621,23.113020],[113.397621,23.113020],[113.394791,23.112595],[113.397621,23.113020],[113.397621,23.113020],[113.397621,23.113020],[113.394791,23.112595],[113.394791,23.112595],[113.394791,23.112595]]   #输入坐标点（注意）folium包要求坐标形式以纬度在前，经度在后
route = folium.PolyLine(    #polyline方法为将坐标用线段形式连接起来
    location,    #将坐标点连接起来
    weight=3,  #线的大小为3
    color='orange',  #线的颜色为橙色
    opacity=0.8    #线的透明度
).add_to(m)    #将这条线添加到刚才的区域m内
m.save(os.path.join(r'/tmp', '1-Heatmap.html'))  #将结果以HTML形式保存到桌面上

# webbrowser.open('f1.html')




# Line map
def line_map(self, all_data):
    line_map = folium.Map(location=[all_data['lat'].mean(), all_data['lon'].mean()],
                          zoom_start=12,
                          tiles='Stamen Terrain',
                          attr="http://ditu.amap.com/")
    route = []
    for name, row in all_data.iterrows():
        route.append([row["lat"], row["lon"]])

    folium.PolyLine(route,
                    weight=5,  # 粗细
                    opacity=0.8,  # 透明度
                    color='orange').add_to(line_map)

    return line_map
